{"version":3,"file":"anti_gravity.min.js","sources":["../src/anti_gravity.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n//\n// Foundation theme.\n//\n// @module     theme_foundation/anti_gravity\n// @copyright  2019 G J Barnard.\n// @author     G J Barnard -\n//               {@link https://moodle.org/user/profile.php?id=442195}\n//               {@link https://gjbarnard.co.uk}\n// @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.\n//\n\nimport $ from 'jquery';\nimport log from 'core/log';\n\n/**\n * Bottom check.\n */\nconst botcheck = () => {\n    var botdocoffset = $(document).height() - $(window).height();\n    var botmainoffset = $('#region-main').height();\n\n    if (botdocoffset < botmainoffset) {\n        return botdocoffset;\n    } else {\n        return botmainoffset;\n    }\n};\n\n/**\n * Anti Gravity.\n */\nconst antiGravity = () => {\n    log.debug('Foundation ES6 Anti Gravity');\n    var topoffset = 220;\n    var duration = 1000;\n    var botoffset = botcheck();\n\n    const gravitycheck = () => {\n        var sc = $(window).scrollTop();\n        if (sc > topoffset) {\n            $('.backtotop').fadeIn(duration);\n        } else {\n            $('.backtotop').fadeOut(duration);\n        }\n        if (sc < botoffset) {\n            $('.gotobottom').fadeIn(duration);\n        } else {\n            $('.gotobottom').fadeOut(duration);\n        }\n    };\n\n    $(window).scroll(function () {\n        gravitycheck();\n    });\n    gravitycheck();\n\n    $('.backtotop').click(function (event) {\n        event.preventDefault();\n        $('html, body').animate({ scrollTop: 0 }, duration);\n        return false;\n    });\n\n    $('.gotobottom').click(function (e) {\n        e.preventDefault();\n        var target = $('#region-main');\n        $('html, body').animate({ scrollTop: target.position().top + target.height() }, duration);\n        return false;\n    });\n};\n\n/**\n * Anti Gravity Init.\n */\nexport const init = () => {\n    log.debug('Foundation ES6 Anti Gravity init');\n    if (document.readyState !== 'loading') {\n        log.debug(\"Foundation ES6 Anti Gravity init DOM content already loaded\");\n        antiGravity();\n    } else {\n        log.debug(\"Foundation ES6 Anti Gravity init JS DOM content not loaded\");\n        document.addEventListener('DOMContentLoaded', function () {\n            log.debug(\"Foundation ES6 Anti Gravity init JS DOM content loaded\");\n            antiGravity();\n        });\n    }\n};\n"],"names":["antiGravity","debug","botdocoffset","botmainoffset","botoffset","document","height","window","gravitycheck","sc","scrollTop","fadeIn","fadeOut","scroll","click","event","preventDefault","animate","e","target","position","top","readyState","addEventListener"],"mappings":";;6JA8CMA,YAAc,kBACZC,MAAM,mCAdNC,aACAC,cAgBAC,WAjBAF,cAAe,mBAAEG,UAAUC,UAAW,mBAAEC,QAAQD,SAChDH,eAAgB,mBAAE,gBAAgBG,SAElCJ,aAAeC,cACRD,aAEAC,qBAaLK,aAAe,SACbC,IAAK,mBAAEF,QAAQG,YACfD,GANQ,wBAON,cAAcE,OANT,yBAQL,cAAcC,QART,KAUPH,GAAKL,8BACH,eAAeO,OAXV,yBAaL,eAAeC,QAbV,0BAiBbL,QAAQM,QAAO,WACbL,kBAEJA,mCAEE,cAAcM,OAAM,SAAUC,cAC5BA,MAAMC,qCACJ,cAAcC,QAAQ,CAAEP,UAAW,GAxB1B,MAyBJ,yBAGT,eAAeI,OAAM,SAAUI,GAC7BA,EAAEF,qBACEG,QAAS,mBAAE,0CACb,cAAcF,QAAQ,CAAEP,UAAWS,OAAOC,WAAWC,IAAMF,OAAOb,UA/BzD,MAgCJ,oBAOK,kBACZL,MAAM,oCACkB,YAAxBI,SAASiB,yBACLrB,MAAM,+DACVD,6BAEIC,MAAM,8DACVI,SAASkB,iBAAiB,oBAAoB,wBACtCtB,MAAM,0DACVD"}