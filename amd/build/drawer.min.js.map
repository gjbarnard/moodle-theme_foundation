{"version":3,"file":"drawer.min.js","sources":["../src/drawer.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n//\n// Drawer.\n//\n// @module     theme_foundation/drawer\n// @copyright  2019 G J Barnard.\n// @author     G J Barnard -\n//               {@link https://moodle.org/user/profile.php?id=442195}\n//               {@link https://gjbarnard.co.uk}\n// @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.\n//\n\nimport $ from 'jquery';\nimport * as FoundationUtil from 'theme_foundation/util';\nimport log from 'core/log';\n\nconst drawer = () => {\n        $('#drawer').click(function() {\n            var closeDrawer = $('#drawerclose');\n            var openDrawer = $('#draweropen');\n            var drawer = $('[data-region=\"blocks-drawer\"]');\n\n            if (closeDrawer.hasClass('d-none')) {\n                // Drawer closed -> open.\n                openDrawer.addClass('d-none');\n                closeDrawer.removeClass('d-none');\n                drawer.removeClass('drawer-hidden');\n                $('body').addClass('drawer-open');\n                drawer.attr('aria-hidden', 'false');\n                openDrawer.attr('aria-hidden', 'true');\n                closeDrawer.attr('aria-hidden', 'false');\n                FoundationUtil.setUserPreference('drawerclosed', false);\n            } else {\n                // Drawer open -> closed.\n                closeDrawer.addClass('d-none');\n                openDrawer.removeClass('d-none');\n                drawer.addClass('drawer-hidden');\n                $('body').removeClass('drawer-open');\n                drawer.attr('aria-hidden', 'true');\n                closeDrawer.attr('aria-hidden', 'true');\n                openDrawer.attr('aria-hidden', 'false');\n                FoundationUtil.setUserPreference('drawerclosed', true);\n            }\n        });\n        log.debug('Foundation ES6 Drawer drawer');\n};\n\n/**\n * Init.\n */\nexport const drawerInit = () => {\n    log.debug('Foundation ES6 Drawer drawerInit');\n    if (document.readyState !== 'loading') {\n        drawer();\n    } else {\n        document.addEventListener('DOMContentLoaded', function () {\n            drawer();\n        });\n    }\n};\n"],"names":["drawer","click","closeDrawer","openDrawer","hasClass","addClass","removeClass","attr","FoundationUtil","setUserPreference","debug","document","readyState","addEventListener"],"mappings":";;+0BA8BMA,OAAS,yBACL,WAAWC,OAAM,eACXC,aAAc,mBAAE,gBAChBC,YAAa,mBAAE,eACfH,QAAS,mBAAE,iCAEXE,YAAYE,SAAS,WAErBD,WAAWE,SAAS,UACpBH,YAAYI,YAAY,UACxBN,OAAOM,YAAY,qCACjB,QAAQD,SAAS,eACnBL,OAAOO,KAAK,cAAe,SAC3BJ,WAAWI,KAAK,cAAe,QAC/BL,YAAYK,KAAK,cAAe,SAChCC,eAAeC,kBAAkB,gBAAgB,KAGjDP,YAAYG,SAAS,UACrBF,WAAWG,YAAY,UACvBN,OAAOK,SAAS,qCACd,QAAQC,YAAY,eACtBN,OAAOO,KAAK,cAAe,QAC3BL,YAAYK,KAAK,cAAe,QAChCJ,WAAWI,KAAK,cAAe,SAC/BC,eAAeC,kBAAkB,gBAAgB,oBAGrDC,MAAM,qDAMQ,kBAClBA,MAAM,oCACkB,YAAxBC,SAASC,WACTZ,SAEAW,SAASE,iBAAiB,oBAAoB,WAC1Cb"}